class AdataFlow{constructor(e){this.element=e,this.LogLevel={INFO:0,WARNING:1,ERROR:2,DEBUG:3},this.component={},this._components={},this._componentThree={},this._globalCss={},this.styleElement=document.createElement("style"),this._loadFunctions()}render(){var e=[];for(var t of(this.element.head.appendChild(this.styleElement),this.element.body.childNodes.forEach(t=>e.push(t)),this.element.body.innerHTML=null,this._log(this.LogLevel.INFO,"Renderer","Starting page renderer"),e)){var o=this._componentExecute(t);"object"==typeof o?this.element.body.appendChild(o):this.element.body.innerHTML+=o}}_componentExecute(e){var t=e.nodeName.toLowerCase(),o=null;if(void 0===this._components[t]&&"#text"!=t)this._log(this.LogLevel.WARNING,"ComponentExecute","Tryed to execute component which not exist: "+t);else{if("#text"==t)return e.wholeText;var o=this._components[t].call(e);for(var n of(o.classList.add(this._randomClassName(15),this._components[t].identificator),e.childNodes)){var i=this._componentExecute(n);"object"==typeof i?o.appendChild(i):o.innerHTML+=i}if(null!=e.getAttribute("link")){var s=document.createElement("a");s.href=e.getAttribute("link"),s.appendChild(o),o=s}}return o}_componentRegister(e,t,o={}){for(var n of(Array.isArray(e)||(this._log(this.LogLevel.DEBUG,"ComponentRegister","Converting single component name into array"),e=[e]),e)){if(void 0!==this._components[n]){this._log(this.LogLevel.ERROR,"ComponentRegister","Component with this name is already registered");continue}this._log(this.LogLevel.INFO,"ComponentRegister","Registering new component with name: "+n),this._components[n]={identificator:this._randomClassName(10),call:t};var i=Object.keys(o);if(0!=i.length){var s="";i.forEach(e=>{if("object"!=typeof o[e])s+=e.replaceAll("_","-")+":"+o[e]+";";else{var t="";Object.keys(o[e]).forEach(n=>t+=n.replaceAll("_","-")+":"+o[e][n]+";"),this.styleElement.innerHTML+="."+this._components[n].identificator+e+"{"+t+"}"}}),this.styleElement.innerHTML+="."+this._components[n].identificator+"{"+s+"}"}this._log(this.LogLevel.INFO,"ComponentRegister","Setting up unique class name for component: "),"function"!=typeof this._components[n]&&this._log(this.LogLevel.ERROR,"ComponentRegister","Failed to register component")}}_importCSS(e){this.styleElement.innerHTML+="@import url('"+e+"');"}_addCSS(e){if("object"==typeof e){var t="";for(var o of Object.keys(e)){for(var n of(t+=o+"{",Object.keys(e[o])))t+=n.replaceAll("_","-")+":"+e[o][n]+";";t+="}"}this.styleElement.innerHTML+=t}else this._log(this.LogLevel.WARNING,"GlobalCSS","Global CSS rule set is not object")}_randomClassName(e=10){for(var t="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ01234546789",o="",n=0;n!=e;n++)o+=t.charAt(Math.floor(Math.random()*(t.length-1)));return"_"+o}_log(e,t,o){}_loadFunctions(){this.component={register:this._componentRegister.bind(this),execute:this._componentExecute.bind(this)},this.css={import:this._importCSS.bind(this),add:this._addCSS.bind(this)}}}
